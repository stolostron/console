---
apiVersion: agent.open-cluster-management.io/v1
kind: KlusterletAddonConfig
metadata:
  name: '{{{name}}}'
  namespace: '{{{name}}}'
spec:
  clusterName: '{{{name}}}'
  clusterNamespace: '{{{name}}}'
  clusterLabels:
{{#switch infrastructure}}
  {{#case 'AWS'}}
    cloud: Amazon
  {{/case}}
  {{#case 'GCP'}}
    cloud: Google
  {{/case}}
  {{#case 'Azure'}}
    cloud: Azure
  {{/case}}
  {{#case 'BMC'}}
    cloud: Bare-Metal
  {{/case}}
  {{#case 'vSphere'}}
    cloud: vSphere
  {{/case}}
  {{#case 'OpenStack'}}
    cloud: OpenStack
  {{/case}}
  {{#case 'RHV'}}
    cloud: RHV
  {{/case}}
{{/switch}}
    vendor: OpenShift
  applicationManager:
    {{#if argocdcluster}}
    argocdCluster: true
    {{/if}}
{{#if hasProxy}}
    proxyPolicy: OCPGlobalProxy
{{/if}}
    enabled: true
  policyController:
{{#if hasProxy}}
    proxyPolicy: OCPGlobalProxy
{{/if}}
    enabled: true
  searchCollector:
{{#if hasProxy}}
    proxyPolicy: OCPGlobalProxy
{{/if}}
    enabled: true
  certPolicyController:
{{#if hasProxy}}
    proxyPolicy: OCPGlobalProxy
{{/if}}
    enabled: true
  iamPolicyController:
{{#if hasProxy}}
    proxyPolicy: OCPGlobalProxy
{{/if}}
    enabled: true
