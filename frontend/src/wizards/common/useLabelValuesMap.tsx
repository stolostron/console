/* Copyright Contributors to the Open Cluster Management project */
import { useMemo } from 'react'
import { IResource } from './resources/IResource'

export function useLabelValuesMap(clusters: IResource[]) {
  return useMemo(() => {
    const labelValuesMap: Record<string, string[]> = {}
    for (const cluster of clusters) {
      const labels = cluster.metadata?.labels ?? {}
      for (const label in labels) {
        let values = labelValuesMap[label]
        if (!values) {
          values = []
          labelValuesMap[label] = values
        }
        const value = labels[label]
        if (value !== undefined) {
          if (!values.includes(value)) {
            values.push(value)
          }
        }
      }
    }
    return labelValuesMap
  }, [clusters])
}
